# 🎯 Grasshopper Quality Analyzer - 사용자 가이드

**버전: 0.3.0-alpha** | **최종 업데이트: 2025-11-15**

Grasshopper 정의 파일을 위한 완전한 품질 분석 도구 - 9개의 전문화된 컴포넌트 제공

---

## 🚀 빠른 시작

### 설치 방법
1. Grasshopper 캔버스에 Python 컴포넌트 추가
2. `standalone` 폴더에서 원하는 `.py` 파일 열기
3. 전체 스크립트를 Python 컴포넌트에 복사
4. 입력/출력 연결
5. 완료! 🎉

### 컴포넌트 선택 가이드

| 컴포넌트 | 카테고리 | 용도 | 난이도 |
|-----------|----------|---------|------------|
| **Health Check** | 분석 | 전체 품질 점수 | ⭐ 쉬움 |
| **Issue Finder** | 분석 | 상세 문제 탐지 | ⭐⭐ 보통 |
| **Statistics** | 분석 | 컴포넌트 분석 | ⭐ 쉬움 |
| **Performance Profiler** ⚡ | 분석 | 병목 지점 탐지 | ⭐⭐ 보통 |
| **Parameter Namer** | 자동화 | 타입별 일괄 이름 변경 | ⭐⭐ 보통 |
| **Auto Alignment** | 자동화 | 컴포넌트 레이아웃 | ⭐⭐⭐ 고급 |
| **Preview Control** | 자동화 | 프리뷰 활성화/비활성화 | ⭐ 쉬움 |
| **Display Mode** | 자동화 | 아이콘/이름/둘다 | ⭐ 쉬움 |
| **Python I/O Manager** | 자동화 | 자동 입출력 설정 | ⭐⭐ 보통 |

---

## 📊 분석 컴포넌트 (4개)

### 1. Health Check (건강 체크)

**실행 가능한 피드백과 함께 빠른 품질 평가**

#### 입력:
- `run` (Button): 분석 실행
- `style` (Text): 리포트 스타일
  - `'simple'` - 점수 + 요약 (기본값)
  - `'compact'` - + 이슈 개수
  - `'full'` - + 모든 이슈 상세

#### 출력:
- `report` (Panel): 포맷된 건강 리포트
- `score` (Number): 건강 점수 (0-100)
- `issue_count` (Number): 발견된 총 이슈 개수

#### 건강 점수 시스템:
- **90-100**: ✅ 우수 - 프로덕션 준비 완료
- **70-89**: 👍 양호 - 약간의 개선 필요
- **50-69**: ⚠️ 주의 필요 - 상당한 이슈 존재
- **0-49**: ❌ 심각 - 주요 문제 존재

#### 언제 사용하나요:
- 작업 중 빠른 체크
- 저장/공유 전
- 정기적인 품질 검증
- 팀 코드 리뷰

---

### 2. Issue Finder (이슈 탐색기)

**필터링 기능이 있는 상세 이슈 탐지**

#### 입력:
- `run` (Button): 검색 실행
- `find_errors` (Boolean): 에러 포함 (기본값: True)
- `find_warnings` (Boolean): 경고 포함 (기본값: True)
- `find_info` (Boolean): 정보 포함 (기본값: False)
- `highlight` (Boolean): 캔버스에서 이슈 선택 (기본값: False)

#### 출력:
- `errors` (List): 에러 레벨 이슈 (GH001, GHRT1)
- `warnings` (List): 경고 레벨 이슈 (GH002, GH003, GH016 등)
- `info` (List): 정보 레벨 이슈 (GH004, GH012, GH017, GH018 등)
- `summary` (Text): 타입별 이슈 분석

#### 이슈 심각도 레벨:
- **❌ 에러 (2개)**: 기능에 영향을 주는 치명적 문제
  - GH001: 연결되지 않은 입력
  - GHRT1: 런타임 에러
  
- **⚠️ 경고 (6개)**: 주의가 필요한 문제
  - GH002: 사용되지 않는 출력
  - GH003: 이름 없는 파라미터
  - GH016: 느린 컴포넌트 실행 (>100ms) ⚡ 신규
  - GHRT2: 런타임 경고
  - 그 외...
  
- **ℹ️ 정보 (10개)**: 개선 제안
  - GH004: 그룹 없음
  - GH012: 프리뷰 비활성화
  - GH017: 연산 병목 (>20% 총 시간) ⚡ 신규
  - GH018: 무거운 프리뷰 지오메트리 ⚡ 신규
  - 그 외...

#### 언제 사용하나요:
- 특정 이슈 타입에 집중
- 납품 전 품질 체크
- 기술 부채 파악
- 컴포넌트 디버깅

---

### 3. Statistics (통계)

**종합적인 문서 메트릭**

#### 입력:
- `run` (Button): 통계 생성

#### 출력:
- `total_components` (Number): 컴포넌트 개수
- `total_wires` (Number): 와이어 개수
- `total_groups` (Number): 그룹 개수
- `by_category` (Text): 카테고리별 분석 (Params, Math, Vector 등)
- `detailed_breakdown` (Text): 전체 컴포넌트 분석

#### 제공되는 메트릭:
- 총 컴포넌트/와이어/그룹 개수
- 카테고리별 컴포넌트 분포
- 가장 많이 사용된 컴포넌트 타입
- 파일 복잡도 지표
- 문서화 메타데이터

#### 언제 사용하나요:
- 파일 복잡도 이해
- 컴포넌트 분포 분석
- 문서화 및 보고서 작성
- 리팩토링 계획

---

### 4. Performance Profiler (성능 프로파일러) ⚡ 신규 v0.3.0

**성능 병목 지점 및 최적화 기회 파악**

#### 입력:
- `run` (Button): 프로파일링 시작
- `mode` (Number 0-2): 프로파일링 모드
  - `0` = 빠름 (1회) - 빠른 개요
  - `1` = 상세 (5회 평균) - 정확한 타이밍
  - `2` = 라이브 - 지속적 모니터링
- `threshold_ms` (Number): 느린 컴포넌트 기준값 (밀리초, 기본값: 100)
- `auto_select` (Boolean): 캔버스에서 느린 컴포넌트 자동 선택 (기본값: False)
- `report_style` (Text): 리포트 포맷
  - `'simple'` - 점수 + 주요 병목
  - `'compact'` - + 성능 분석
  - `'full'` - + 모든 컴포넌트 타이밍

#### 출력:
- `report` (Panel): 성능 분석 리포트
- `performance_score` (Number): 성능 점수 (0-100)
- `slow_components` (List): 기준값 초과 컴포넌트
- `total_time_ms` (Number): 총 실행 시간
- `bottlenecks` (Text): 주요 성능 이슈

#### 성능 점수 계산:
- **90-100**: ⚡ 우수 - 고도로 최적화됨
- **70-89**: 👍 양호 - 수용 가능한 성능
- **50-69**: ⚠️ 느림 - 최적화 권장
- **0-49**: 🐌 심각 - 심각한 병목

#### 분석 기능:
- **실행 시간 추적**: <1ms 오버헤드로 컴포넌트별 타이밍
- **병목 탐지**: 총 시간의 >20% 사용하는 컴포넌트 식별
- **플러그인 분석**: 플러그인/카테고리별 성능 분석
- **패턴 인식**: 무거운 프리뷰 지오메트리, 데이터 트리 연산, 스크립트
- **스마트 제안**: 상황 인식 최적화 조언

#### 프로파일링 모드 설명:
- **빠름 (0)**: 1회 실행
  - 사용: 대용량 파일 (500+ 컴포넌트)
  - 정확도: ±10-20ms 편차
  - 속도: <1초
  
- **상세 (1)**: 5회 평균
  - 사용: 정확한 병목 지점 식별
  - 정확도: ±2-5ms 편차
  - 속도: 5-10초
  
- **라이브 (2)**: 지속적 모니터링
  - 사용: 실시간 최적화 작업
  - 업데이트: 각 솔루션 후
  - 속도: 최소 오버헤드

#### 언제 사용하나요:
- 정의 파일이 느리게 실행될 때
- 대규모 데이터셋으로 확장하기 전
- 최적화 및 리팩토링
- 성능 문서화
- 알고리즘 대안 비교

#### 최적화 제안:
프로파일러는 상황 인식 권장 사항 제공:
- 무거운 연산 전 데이터 트리 평면화
- 더 간단한 프리뷰 지오메트리 사용
- 느린 컴포넌트를 빠른 대안으로 교체
- 반복 대신 배치 연산 사용
- 불필요한 프리뷰 비활성화
- 플러그인별 최적화 고려

---

## 🔧 자동화 컴포넌트 (5개)

### 5. Parameter Namer (파라미터 이름 지정기)

**접두사/접미사를 지원하는 컴포넌트 타입별 일괄 이름 변경**

#### 입력:
- `run` (Button): 이름 변경 실행
- `component_type` (Text): 변경할 타입
  - `'Number Slider'` - 모든 숫자 슬라이더 이름 변경
  - `'Panel'` - 모든 패널 이름 변경
  - `'Boolean Toggle'` - 모든 토글 이름 변경
  - `'All'` - 모든 파라미터 컴포넌트 이름 변경
- `name_prefix` (Text): 이름 접두사 (기본값: "Param")
- `name_suffix` (Text): 이름 접미사 (선택사항)
- `start_number` (Number): 시작 인덱스 (기본값: 1)

#### 출력:
- `report` (Text): 이름 변경 요약
- `renamed_count` (Number): 이름 변경된 컴포넌트 수
- `component_list` (Text): 이름 변경된 컴포넌트 목록

#### 이름 지정 패턴:
- 형식: `{prefix}_{type}_{number}{suffix}`
- 예시: `Param_Slider_001`, `Input_Panel_01_Required`

#### 언제 사용하나요:
- 이름 없는 파라미터 정리
- 파라미터 이름 표준화
- 정의 파일 공유 전
- 문서화 준비

---

### 6. Auto Alignment (자동 정렬)

**와이어 기반 플로우 분석을 이용한 스마트 컴포넌트 레이아웃**

#### 입력:
- `run` (Button): 정렬 실행
- `vertical_spacing` (Number): 레이어 간 간격 (기본값: 150)
- `horizontal_spacing` (Number): 레이어 내 간격 (기본값: 100)
- `auto_apply` (Boolean): 즉시 적용 (기본값: False)
- `align_parameters` (Boolean): 파라미터 컴포넌트 포함 (기본값: True)

#### 출력:
- `report` (Text): 정렬 요약
- `total_moved` (Number): 재배치된 컴포넌트
- `layer_count` (Number): 논리적 레이어 수

#### 알고리즘 특징:
- **와이어 플로우 분석**: 연결 기반 논리적 레이어 생성
- **최장 경로**: 복잡한 그래프의 정확한 레이어 할당
- **앵커 기반 위치 지정**: 컴포넌트 드리프트 방지
- **파라미터 정렬**: 파라미터 컴포넌트를 타겟과 수평 정렬
- **프리뷰 모드**: 적용 전 테스트 (auto_apply = False)

#### 언제 사용하나요:
- 복잡한 정의 파일 정리
- 대규모 리팩토링 후
- 가독성 향상
- 스크린샷/문서화 전

#### 알려진 제한사항:
- 다중 타겟이 있는 파라미터 컴포넌트는 수동 조정 필요할 수 있음
- 매우 복잡한 순환 의존성은 수동 개입 필요할 수 있음
- 결과가 예상과 다르면 Ctrl+Z로 실행 취소

---

### 7. Preview Control (프리뷰 제어) ⚡ 신규 v0.3.0

**컴포넌트 프리뷰 일괄 활성화/비활성화**

#### 입력:
- `run` (Button): 제어 실행
- `enable_all` (Boolean): 모든 프리뷰 활성화 (True = 활성화, False = 비활성화)

#### 출력:
- `report` (Text): 변경 요약
- `modified_count` (Number): 수정된 컴포넌트

#### 언제 사용하나요:
- 뷰포트 성능 향상
- 특정 컴포넌트 디버깅
- 대용량 파일 최적화
- 프레젠테이션 준비

---

### 8. Display Mode Manager (디스플레이 모드 관리자) ⚡ 신규 v0.3.0

**컴포넌트 디스플레이 모드 제어 (아이콘/이름/둘다)**

#### 입력:
- `run` (Button): 변경 실행
- `mode` (Number 0-2): 디스플레이 모드
  - `0` = 아이콘만
  - `1` = 이름만
  - `2` = 아이콘 + 이름 (기본값)
- `apply_to_selection` (Boolean): 선택된 컴포넌트만 적용 (기본값: False)

#### 출력:
- `report` (Text): 변경 요약
- `modified_count` (Number): 수정된 컴포넌트

#### 언제 사용하나요:
- 캔버스 외관 커스터마이징
- 시각적 혼잡도 감소
- 가독성 향상
- 스크린샷 준비

---

### 9. Python I/O Manager (Python 입출력 관리자)

**Python 스크립트 컴포넌트 입출력 자동 관리**

#### 입력:
- `run` (Button): 관리 실행
- `auto_detect` (Boolean): 필요한 I/O 자동 탐지 (기본값: True)
- `clean_unused` (Boolean): 사용하지 않는 I/O 제거 (기본값: False)

#### 출력:
- `report` (Text): 관리 요약
- `inputs_added` (Number): 추가된 입력
- `outputs_added` (Number): 추가된 출력
- `removed_count` (Number): 제거된 미사용 I/O

#### 기능:
- Python 코드에서 변수 사용 스캔
- 누락된 입출력 자동 추가
- 선택적으로 미사용 I/O 제거
- 컴포넌트 즉시 업데이트

#### 언제 사용하나요:
- Python 스크립트 수정 후
- 오래된 코드 정리
- I/O를 스크립트 변경사항과 동기화
- 빠른 Python 컴포넌트 설정

---

## 💡 실전 워크플로우

### 워크플로우 1: 일상적인 개발
```
1. 정의 파일 정상적으로 작업
2. 30분마다 Health Check (simple 모드) 실행
3. 점수 80 이상 유지
4. 이슈 발견 시 즉시 수정
5. 느려지면 Performance Profiler 실행
```

### 워크플로우 2: 납품 전 품질 체크
```
1. Health Check (full 모드) 실행
2. 목표: 에러 0개, 경고 최소화
3. Issue Finder로 모든 문제 확인
4. 에러부터 수정, 그 다음 경고
5. Parameter Namer로 일관성 확보
6. Auto Alignment로 정리
7. Statistics로 문서화
8. 최종 Health Check → 90+ 목표
```

### 워크플로우 3: 성능 최적화
```
1. Performance Profiler (detailed 모드) 실행
2. >100ms 컴포넌트 식별
3. 각 병목에 대한 제안 확인
4. 최적화 적용:
   - 데이터 트리 평면화
   - 지오메트리 단순화
   - 느린 컴포넌트 교체
5. 프로파일러 재실행으로 개선 확인
6. 점수 >80까지 반복
```

### 워크플로우 4: 대용량 파일 정리
```
1. Statistics로 복잡도 파악
2. Issue Finder (모든 타입) 실행
3. Parameter Namer를 'All' 컴포넌트에 사용
4. 불필요한 프리뷰 비활성화 (Preview Control)
5. Auto Alignment로 정리
6. Performance Profiler 실행
7. Health Check (full)로 결과 문서화
```

### 워크플로우 5: 팀 협업 설정
```
1. 팀 표준 수립:
   - 최소 건강 점수: 80
   - 에러 허용 안 함
   - 모든 파라미터 이름 필수
   - 성능 점수: >70
2. 커밋 전 전체 체크 실행
3. 일관된 네이밍 컨벤션 사용
4. 성능 프로파일링 결과 공유
5. 리뷰를 위한 병목 지점 문서화
```

---

## 🎯 모범 사례

### 품질 표준
- **항상 유지**: 건강 점수 >80
- **제로 톨러런스**: 에러 (GH001, GHRT1)
- **최소화**: 경고 <5개
- **문서화**: 복잡한 알고리즘은 그룹으로 정리

### 성능 표준
- **목표**: 성능 점수 >70
- **모니터링**: >100ms 실행 시간 컴포넌트
- **최적화**: 총 시간의 >20% 사용하는 병목
- **테스트**: 현실적인 데이터 크기로 프로파일링

### 정리 표준
- **모든 파라미터 이름 지정**: Parameter Namer 사용
- **컴포넌트 그룹화**: 10개 이상 = 그룹 생성
- **깔끔한 레이아웃**: Auto Alignment 정기적 사용
- **프리뷰 최적화**: 필요 없는 곳은 비활성화

### 협업 표준
- **커밋 전 체크**: Health Check + Performance Profiler 실행
- **문서화**: README에 Statistics 포함
- **네이밍 컨벤션**: 팀 전체 파라미터 네이밍 규칙
- **성능 기준선**: 초기 성능 점수 문서화

---

## 🔍 린트 룰 참조

### ❌ 에러 (2개)
| 코드 | 이름 | 설명 | 수정 방법 |
|------|------|-------------|-----|
| GH001 | 연결되지 않은 입력 | 필수 입력이 연결 안 됨 | 모든 입력 연결 |
| GHRT1 | 런타임 에러 | 컴포넌트 실행 에러 | 에러 메시지 확인 |

### ⚠️ 경고 (6개)
| 코드 | 이름 | 설명 | 수정 방법 |
|------|------|-------------|-----|
| GH002 | 사용되지 않는 출력 | 출력이 사용 안 됨 | 사용하거나 제거 |
| GH003 | 이름 없는 파라미터 | 이름 없는 파라미터 | Parameter Namer 사용 |
| GH016 | 느린 컴포넌트 | 실행 >100ms | 최적화 또는 교체 |
| GHRT2 | 런타임 경고 | 컴포넌트 경고 | 경고 확인 |
| ... | 그 외 | 다양한 경고 | 상황별 대응 |

### ℹ️ 정보 (10개)
| 코드 | 이름 | 설명 | 제안 |
|------|------|-------------|------------|
| GH004 | 그룹 없음 | 정리되지 않은 대용량 파일 | 그룹 생성 (Ctrl+G) |
| GH012 | 프리뷰 비활성화 | 프리뷰 꺼진 컴포넌트 | 필요한 곳 활성화 |
| GH017 | 성능 병목 | 컴포넌트 >20% 총 시간 | 주요 최적화 타겟 |
| GH018 | 무거운 프리뷰 | 큰 프리뷰 지오메트리 | 단순화 또는 비활성화 |
| ... | 그 외 | 다양한 제안 | 상황별 대응 |

---

## 🐛 문제 해결

### "No active Grasshopper document"
- **원인**: Grasshopper가 열리지 않았거나 파일이 로드되지 않음
- **해결**: Grasshopper를 열고 정의 파일 로드

### "Module not found" 또는 "Import error"
- **원인**: 스크립트 경로가 잘못되었거나 파일이 이동됨
- **해결**: 스크립트 상단의 경로 업데이트
```python
# 설치 위치에 맞게 경로 업데이트
sys.path.append(r"C:\...\RhinoScripts\src\gh\standalone")
```

### Performance Profiler가 모두 0ms 반환
- **원인**: 문서가 아직 솔브되지 않음
- **해결**: 프로파일링 전 솔루션 강제 실행 (F5)

### Auto Alignment가 예상치 못한 레이아웃 생성
- **원인**: 복잡한 순환 의존성 또는 비정상적인 연결
- **해결**: 
  1. 실행 취소 (Ctrl+Z)
  2. 연결 단순화
  3. 다른 간격 값으로 재시도
  4. 먼저 프리뷰 모드 사용 (auto_apply = False)

### 반복 정렬 후 컴포넌트 드리프트
- **이슈**: v0.3.0-alpha에서 앵커 기반 위치 지정으로 수정됨
- **해결**: 최신 버전으로 업데이트

### Python I/O Manager가 변수를 탐지하지 못함
- **원인**: 비표준 변수 명명 또는 복잡한 코드
- **해결**: 명확한 변수명 사용 (x, y, a, b 등)

---

## 📈 버전 히스토리

### v0.3.0-alpha (현재)
- ⚡ Performance Profiler 컴포넌트 추가
- 🎨 Display 컴포넌트를 Preview Control + Display Mode로 분리
- 📊 새로운 린트 룰 3개 추가 (GH016-GH018)
- 🔧 컴포넌트 구성 개선
- 📝 일관된 네이밍 컨벤션

### v0.2.0-alpha
- Component Organizer 추가
- 자동 정렬 알고리즘 개선

### v0.1.0-alpha
- 최초 공개 릴리스
- 5개 핵심 컴포넌트
- 15개 린트 룰

[📖 전체 변경사항](../../CHANGELOG.md)

---

## 💬 도움 받기

### 문서
- [빠른 시작 가이드](../QUICKSTART.md) - 5분 설정
- [설치 가이드](INSTALLATION.md) - 상세 설정
- [모범 사례](../../docs/best-practices.md) - 품질 표준
- [API 참조](../../docs/api-reference.md) - 개발자용

### 지원 채널
- 🐛 **버그 리포트**: [GitHub Issues](https://github.com/dongwoosuk/grasshopper-quality-analyzer/issues)
- 💡 **기능 요청**: [GitHub Discussions](https://github.com/dongwoosuk/grasshopper-quality-analyzer/discussions)
- 📧 **이메일**: dongwoosuk0219@gmail.com

### 기여하기
기여를 환영합니다! 가이드라인은 [CONTRIBUTING.md](../../CONTRIBUTING.md)를 참조하세요.

---

## 🚀 다음은?

### 계획된 기능
- [ ] 더 많은 자동 수정 기능 (와이어 정리, 그룹 생성)
- [ ] 커스텀 린트 룰 생성
- [ ] 성능 히스토리 추적
- [ ] 팀 표준 템플릿
- [ ] 버전 관리 통합
- [ ] 자동화된 테스팅 프레임워크

### 업데이트 받기
- ⭐ GitHub에서 프로젝트에 스타 주기
- 👀 업데이트 알림 받기
- 📢 토론 참여하기
- 🤝 개선사항 기여하기

---

**즐거운 Grasshopper 작업 되세요! 🦗**

AEC 커뮤니티를 위해 ❤️로 제작  
한 번에 하나씩 정의 파일을 개선합니다.
